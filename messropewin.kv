MessRopeRoot:
    name: 'TabbedPanelMessRope'
    fullscreen: True
    on_parent: if args[1] and tp.current_tab == tab_fl: root.showcase_boxlayout(fl)

    TabbedPanel:
        id: tp
        do_default_tab: False

        TabbedPanelItem:
            id: tab_fl
            font_name: 'Adobe Kaiti Std.otf'
            text: '离线视频'
            on_release: root.showcase_boxlayout(fl)
            FloatLayout:
                CBoxLayout:
                    id: fl
                    # orientation: 'vertical'
                    CBoxLayout:
                        id: fl1
                        orientation: 'vertical'
                        size_hint: .75, 1
                        Label:
                            size_hint: 1, .1
                            font_name: 'Adobe Kaiti Std.otf'
                            text:
                                ('[b][color=feffd5]卷扬乱绳自动识别系统[/color][/b]')
                            markup: True
                            # font_size: '50'
                            font_size: sp(root.font_scaling*50)
                        KivyCamera:
                            id: qrcam
                            size_hint: 1, .9
                        # CBoxLayout:
                        #     size_hint: 1, .1
                        #     Button:
                        #         id: butt_start
                        #         font_name: 'Adobe Kaiti Std.otf'
                        #         text: "开始"
                        #         # font_size: '25'
                        #         font_size: sp(root.font_scaling*25)
                        #         on_press: root.dostart()
                        #     Button:
                        #         id: butt_exit
                        #         font_name: 'Adobe Kaiti Std.otf'
                        #         text: "停止"
                        #         # font_size: '25'
                        #         font_size: sp(root.font_scaling*25)
                        #         on_press: root.doexit()
                    CBoxLayoutRight:
                        orientation: 'vertical'
                        size_hint: .25, 1
                        Label:
                            size_hint: 1, .1
                            text:
                                ('[color=ffff00]1[/color]')
                            markup: True
                            # font_size: '15pt'
                            font_size: sp(root.font_scaling*15)
                        Label:
                            size_hint: 1, .1
                            text:
                                ('[color=ffff00]0[/color]')
                            markup: True
                            # font_size: '15pt'
                            font_size: sp(root.font_scaling*15)
                        Label:
                            size_hint: 1, .8
                            font_name: 'Adobe Kaiti Std.otf'
                            text:
                                ('[b][color=ff0000]乱绳[/color][/b]')
                            markup: True
                            # font_size: '55'
                            font_size: sp(root.font_scaling*55)
                # FloatLayout:
                #     canvas:
                #         Color:
                #             rgb: 1, 0, 0
                #         # Rectangle:
                #         #     pos: root.scalingWidth*root.ids.myvideo.width/2, root.scalingHeight*root.ids.myvideo.height/2
                #         #     size: 25, 25
                #         # Ellipse:
                #         #     angle_start: 0
                #         #     angle_end: 360
                #         Line:
                #             # points: [100, 100, 200, 100, 100, 200]
                #             # ellipse: (350, 200, 50, 150, 0, 360)
                #             # circle: root.ids.myvideo.center_x+200,root.ids.myvideo.center_y+200,5
                #             # circle: root.videoWidth,root.videoHeight,5
                #             # circle: root.ids.fl1.width*8/20,root.ids.fl1.height*11/20,5
                #             circle: root.ids.qrcam.x,root.ids.qrcam.y,5
                #             # bezier:
                #             #     root.ids.myvideo.center_x+root.scalingWidth*100, root.ids.myvideo.center_y+root.scalingHeight*200,\
                #             #     root.ids.myvideo.center_x+root.scalingWidth*150, root.ids.myvideo.center_y+root.scalingHeight*200, \
                #             #     root.ids.myvideo.center_x+root.scalingWidth*150, root.ids.myvideo.center_y+root.scalingHeight*250, \
                #             #     root.ids.myvideo.center_x+root.scalingWidth*100, root.ids.myvideo.center_y+root.scalingHeight*200
                #             width: 2
        TabbedPanelItem:
            font_name: 'Adobe Kaiti Std.otf'
            text: '实时视频'
            on_release: root.showcase_boxlayout(box)
            FloatLayout
                CBoxLayout:
                    id: box
                    CBoxLayout:
                        orientation: 'vertical'
                        size_hint: .75, 1
                        Label:
                            size_hint: 1, .1
                            font_name: 'Adobe Kaiti Std.otf'
                            text:
                                ('[b][color=feffd5]卷扬乱绳自动识别系统[/color][/b]')
                            markup: True
                            # font_size: '50'
                            font_size: sp(root.font_scaling*50)
                        Video:
                            size_hint: 1, .8
                            id: myvideoRight
                            source: './test1.mp4'
                            allow_stretch: True
                            state: 'play'
                            options: {'eos': 'loop'}
                        CBoxLayout:
                            size_hint: 1, .1
                            Button:
                                font_name: 'Adobe Kaiti Std.otf'
                                text: "开始"
                                # font_size: '25'
                                font_size: sp(root.font_scaling*25)
                            Button:
                                font_name: 'Adobe Kaiti Std.otf'
                                text: "停止"
                                # font_size: '25'
                                font_size: sp(root.font_scaling*25)
                    CBoxLayoutRight:
                        orientation: 'vertical'
                        size_hint: .25, 1
                        Label:
                            size_hint: 1, .1
                            text:
                                ('[color=ffff00]1[/color]')
                            markup: True
                            # font_size: '15pt'
                            font_size: sp(root.font_scaling*15)
                        Label:
                            size_hint: 1, .1
                            text:
                                ('[color=ffff00]0[/color]')
                            markup: True
                            # font_size: '15pt'
                            font_size: sp(root.font_scaling*15)
                        Label:
                            size_hint: 1, .8
                            font_name: 'Adobe Kaiti Std.otf'
                            text:
                                ('[b][color=ff0000]乱绳[/color][/b]')
                            markup: True
                            # font_size: '55'
                            font_size: sp(root.font_scaling*55)

<CBoxLayout@BoxLayout+BackgroundColor>
<CBoxLayoutRight@BoxLayout+BackgroundColorRight>

<BackgroundColor@Widget>
    pos_hint: {'center_x': .5, 'center_y': .5}
    size_hint: .9, .9
    canvas.before:
        Color:
            rgba: .2, .3, .4, 1
        Rectangle:
            size: self.size
            pos: self.pos

<BackgroundColorRight@Widget>
    pos_hint: {'center_x': .5, 'center_y': .5}
    size_hint: .9, .9
    canvas.before:
        Color:
            rgba: .22, .32, .42, 1
        Rectangle:
            size: self.size
            pos: self.pos
